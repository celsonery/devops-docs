import{_ as a,c as n,o as s,a as e}from"./app-CT-lU83C.js";const t={},o=e(`<h1 id="etotem-printserver-versao-1-0-0" tabindex="-1"><a class="header-anchor" href="#etotem-printserver-versao-1-0-0"><span>eTotem PrintServer - Versão 1.0.0</span></a></h1><h2 id="objetivo-e-motivacao" tabindex="-1"><a class="header-anchor" href="#objetivo-e-motivacao"><span>Objetivo e motivação</span></a></h2><p>Levando em consideração a segurança dos Browsers, não seria possível enviar uma impressão diretamente para uma impressora, apenas através do diálog de impressão.</p><blockquote><p>Ao menos não facilmente sem abrir mão de mexer nas configurações dos Browsers.</p></blockquote><p>A solução foi então desenvolver um servidor que ficaria residente aguardando uma solicitação de impressão. A solução foi desenvolvida utilizando Java com SpringBoot para a criação de uma API Rest para facilitar o envio da informação pelo Frontend.</p><h2 id="requisitos" tabindex="-1"><a class="header-anchor" href="#requisitos"><span>Requisitos</span></a></h2><ul><li>Java JDK 17+</li><li>Direitos administrativos</li><li>Instalador</li></ul><h2 id="instalacao" tabindex="-1"><a class="header-anchor" href="#instalacao"><span>Instalação</span></a></h2><ul><li>Primeiramente instale o Java JDK 17+</li><li>Após utilize o instalador do PrintServer</li></ul><h2 id="funcionamento" tabindex="-1"><a class="header-anchor" href="#funcionamento"><span>Funcionamento</span></a></h2><ul><li>O PrintServer irá funcionar como serviço do windows escutando na porta TCP 9200 utilizando o protocolo https.</li><li>O PrintServer enviar para a impressora padrão do sistema onde está instalado.</li></ul><h2 id="desenvolvimento-tecnico" tabindex="-1"><a class="header-anchor" href="#desenvolvimento-tecnico"><span>Desenvolvimento [ Técnico ]</span></a></h2><h4 id="criacao-do-jar" tabindex="-1"><a class="header-anchor" href="#criacao-do-jar"><span>Criação do .jar</span></a></h4><ul><li>Primeiramente baixe o código do gitlab.</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">git</span> clone https://gitlab.bagarote.com.br/karyon/etotem/printer.git</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Após gere o .jar utilizando o maven</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ mvnw package</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>OBS.: Isso irá gerar um arquivo &quot;etotem-printer-1.0.0.jar&quot; dentro da parta &quot;target&quot;.</p><h4 id="criacao-do-jar-como-servico-com-winws" tabindex="-1"><a class="header-anchor" href="#criacao-do-jar-como-servico-com-winws"><span>Criação do .jar como Serviço com WinWS</span></a></h4><ul><li>Foi utilizado o utilitário WinWS [https://github.com/winsw/winsw] com o xml abaixo:</li></ul><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>eTotemPrinter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>eTotem Servidor de Impressao<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Serviço de impressao do eTotem.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>env</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ETOTEM_HOME<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>%BASE%<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executable</span><span class="token punctuation">&gt;</span></span>java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executable</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arguments</span><span class="token punctuation">&gt;</span></span>-Xrs -Xmx256m -jar &quot;%BASE%\\etotem-printer-1.0.0.jar&quot; --httpPort=9200<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>arguments</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>log</span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roll<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>log</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>service</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="criacao-do-instalador-usando-o-inno-setup" tabindex="-1"><a class="header-anchor" href="#criacao-do-instalador-usando-o-inno-setup"><span>Criação do Instalador usando o Inno Setup</span></a></h4><ul><li>Foi utilizado o Inno Setup para criar um instalador para a solução: https://jrsoftware.org/isinfo.php</li></ul><blockquote><p>Partes importantes do script setup.iss</p></blockquote><div class="language-iss line-numbers-mode" data-highlighter="prismjs" data-ext="iss" data-title="iss"><pre><code><span class="line">[Files]</span>
<span class="line">Source: &quot;C:\\Users\\Celso\\Devel\\karyon\\etotem\\printer-instalador\\{#MyAppExeName}&quot;; DestDir: &quot;{app}&quot;; Flags: ignoreversion</span>
<span class="line">Source: &quot;C:\\Users\\Celso\\Devel\\karyon\\etotem\\printer-instalador\\etotem-print.xml&quot;; DestDir: &quot;{app}&quot;; Flags: ignoreversion</span>
<span class="line">Source: &quot;C:\\Users\\Celso\\Devel\\karyon\\etotem\\printer-instalador\\etotem-printer-1.0.0.jar&quot;; DestDir: &quot;{app}&quot;; Flags: ignoreversion</span>
<span class="line">Source: &quot;C:\\Users\\Celso\\Devel\\karyon\\etotem\\printer-instalador\\printer.png&quot;; DestDir: &quot;{app}&quot;; Flags: ignoreversion</span>
<span class="line">; NOTE: Don&#39;t use &quot;Flags: ignoreversion&quot; on any shared system files</span>
<span class="line"></span>
<span class="line">[Run]</span>
<span class="line">Filename: &quot;{app}\\{#MyAppExeName}&quot;; Parameters: &quot;install&quot;; Flags: runhidden</span>
<span class="line">Filename: &quot;{app}\\{#MyAppExeName}&quot;; Parameters: &quot;start&quot;; Flags: runhidden</span>
<span class="line">Filename: &quot;{sys}\\netsh.exe&quot;; Parameters: &quot;http add urlacl url=https://+:9200/ sddl=&quot;; Flags: runhidden</span>
<span class="line"></span>
<span class="line">[UninstallRun]</span>
<span class="line">Filename: &quot;{app}\\{#MyAppExeName}&quot;; Parameters: &quot;uninstall&quot;; RunOnceId: &quot;eTotemPrinterService&quot;; Flags: runhidden</span>
<span class="line"></span>
<span class="line">[UninstallDelete]</span>
<span class="line">Name: &quot;{app}\\*&quot;; Type: files;</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="conclusao" tabindex="-1"><a class="header-anchor" href="#conclusao"><span>Conclusão</span></a></h2><ul><li>Esta é uma versao inicial v1.0.0, a muito o que melhorar ainda, porém se mostra estável e funcional.</li><li>O código completo da solução pode ser encontrado em: https://gitlab.bagarote.com.br/karyon/etotem/printer.</li></ul><blockquote><p>Autores: Celso Nery <a href="mailto:celso@karyon.com.br" target="_blank" rel="noopener noreferrer">celso@karyon.com.br</a> | Marlon Xavier <a href="mailto:marlon@karyon.com.br" target="_blank" rel="noopener noreferrer">marlon@karyon.com.br</a></p></blockquote>`,28),i=[o];function l(r,p){return s(),n("div",null,i)}const u=a(t,[["render",l],["__file","printserver.html.vue"]]),d=JSON.parse('{"path":"/print-server/printserver.html","title":"eTotem PrintServer - Versão 1.0.0","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Objetivo e motivação","slug":"objetivo-e-motivacao","link":"#objetivo-e-motivacao","children":[]},{"level":2,"title":"Requisitos","slug":"requisitos","link":"#requisitos","children":[]},{"level":2,"title":"Instalação","slug":"instalacao","link":"#instalacao","children":[]},{"level":2,"title":"Funcionamento","slug":"funcionamento","link":"#funcionamento","children":[]},{"level":2,"title":"Desenvolvimento [ Técnico ]","slug":"desenvolvimento-tecnico","link":"#desenvolvimento-tecnico","children":[]},{"level":2,"title":"Conclusão","slug":"conclusao","link":"#conclusao","children":[]}],"git":{"updatedTime":1753360819000,"contributors":[{"name":"Celso Nery","email":"celso.nery@gmail.com","commits":1}]},"filePathRelative":"print-server/printserver.md"}');export{u as comp,d as data};
